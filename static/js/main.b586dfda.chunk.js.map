{"version":3,"sources":["History.js","Constants/constants.js","default_discord_avatar.png","Components/System.js","Components/MemberCard.js","Components/Loading.js","Components/Memberlist.js","Components/Dash.js","Components/Navigation.js","Components/Footer.js","App.js","index.js","Functions/discord-parser.js"],"names":["createBrowserHistory","API_URL","System","props","useForm","registerEdit","register","handleSubmitEdit","handleSubmit","registerPrivacy","handleSubmitPrivacy","useState","JSON","parse","localStorage","getItem","user","setUser","tag","setTag","timezone","setTimezone","avatar","setAvatar","desc","setDesc","editDesc","setEditDesc","editMode","setEditMode","privacyMode","setPrivacyMode","privacyView","setPrivacyView","invalidTimezone","setInvalidTimezone","errorAlert","setErrorAlert","useEffect","toHTML","require","tz","avatar_url","description","autosize","document","querySelector","className","Header","Title","name","src","style","width","height","roundedCircle","defaultAvatar","Body","variant","onSubmit","data","moment","zone","fetch","method","body","stringify","headers","slice","then","res","json","prevState","setItem","catch","error","console","Text","Row","xs","lg","Label","Control","ref","defaultValue","href","rel","target","Group","maxLength","as","onClick","type","id","size","description_privacy","member_list_privacy","front_privacy","front_history_privacy","dangerouslySetInnerHTML","__html","MemberCard","member","setMember","displayName","setDisplayName","birthday","setBirthday","birthdate","setBirthdate","pronouns","setPronouns","color","setColor","proxy_tags","proxyTags","setProxyTags","proxyView","setProxyView","proxyMode","setProxyMode","open","setOpen","wrongID","setWrongID","memberDeleted","setMemberDeleted","registerDelete","handleSubmitDelete","registerProxy","handleSubmitProxy","display_name","startsWith","bday","replace","bdaymoment","format","birthdaymoment","offset","Toggle","BS","eventKey","Collapse","borderLeft","pattern","o","position","modal","memberID","required","placeholder","visibility","name_privacy","birthday_privacy","pronoun_privacy","metadata_privacy","newdata","filter","prefix","suffix","map","item","index","disabled","block","oldTags","length","proxytag","Loading","fluid","animation","Memberlist","userId","isLoading","setIsLoading","isError","setIsError","currentPage","setCurrentPage","membersPerPage","setMembersPerPage","closeModal","members","setMembers","newMember","setNewMember","value","setValue","fetchMembers","useCallback","log","indexOfLastMember","indexOfFirstMember","currentMembers","toLowerCase","includes","sort","a","b","localeCompare","active","pageAmount","Math","ceil","pageNumbers","i","push","Item","memberList","noGutters","onChange","e","selected","Prev","Ellipsis","Next","view","rows","defaultActiveKey","Dash","Navigation","darkMode","useDarkMode","Brand","defaultChecked","icons","toggle","inline","removeItem","history","Link","App","isSubmit","setIsSubmit","isInvalid","setIsInvalid","logIn","basename","path","to","exact","pkToken","ReactDOM","render","getElementById","markdown","highlight","htmlTag","tagName","content","attributes","isClosed","state","class","cssModuleNames","split","cl","join","attributeString","attr","Object","prototype","hasOwnProperty","call","sanitizeText","unclosedTag","rules","blockQuote","assign","defaultRules","match","source","prevSource","test","inQuote","exec","capture","all","removeSyntaxRegex","Boolean","codeBlock","inlineRegex","lang","trim","html","node","output","code","getLanguage","str","m","language","newline","escape","autolink","sanitizeUrl","url","em","parsed","inEmphasis","strong","u","strike","del","inlineCode","regex","text","escapeHTML","emoticon","order","br","anyScopeRegex","spoiler","link","discordCallbackDefaults","channel","role","everyone","here","rulesDiscord","discordUser","discordCallback","discordChannel","discordRole","discordEmoji","animated","alt","discordEveryone","discordHere","rulesDiscordOnly","rulesEmbed","parser","parserFor","htmlOutput","htmlFor","ruleOutput","parserDiscord","htmlOutputDiscord","parserEmbed","htmlOutputEmbed","module","exports","options","customParser","customHtmlOutput","Error","embed","discordOnly","_parser","_htmlOutput","markdownEngine"],"mappings":"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","file":"static/js/main.b586dfda.chunk.js","sourcesContent":["import { createBrowserHistory } from \"history\";\r\nexport default createBrowserHistory();","const API_URL = \"https://api.pluralkit.me/v1/\";\r\n\r\nexport default API_URL","export default \"data:image/png;base64,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\"","import React, { useState, useEffect } from 'react';\r\nimport  * as BS from 'react-bootstrap'\r\nimport { useForm } from \"react-hook-form\";\r\nimport autosize from 'autosize';\r\nimport moment from 'moment';\r\nimport 'moment-timezone';\r\n\r\nimport API_URL from \"../Constants/constants.js\";\r\n\r\nimport defaultAvatar from '../default_discord_avatar.png'\r\nimport { FaAddressCard } from \"react-icons/fa\";\r\n\r\nexport default function System(props) {\r\n\r\n    const {\r\n        register: registerEdit,\r\n        handleSubmit: handleSubmitEdit\r\n      } = useForm();\r\n\r\n\r\n    const {\r\n        register: registerPrivacy,\r\n        handleSubmit: handleSubmitPrivacy\r\n      } = useForm();\r\n\r\n    const [ user, setUser ] = useState(JSON.parse(localStorage.getItem('user')));\r\n\r\n    const [ tag, setTag ] = useState(\"\");\r\n    const [ timezone, setTimezone ] = useState(\"\");\r\n    const [ avatar, setAvatar ] = useState(\"\");\r\n    const [ desc, setDesc ] = useState(\"\");\r\n    const [ editDesc, setEditDesc ] = useState(\"\");\r\n\r\n    const [ editMode, setEditMode ] = useState(false);\r\n    const [ privacyMode, setPrivacyMode ] = useState(false);\r\n    const [ privacyView, setPrivacyView ] = useState(false);\r\n\r\n    const [ invalidTimezone, setInvalidTimezone ] = useState(false);\r\n    const [ errorAlert, setErrorAlert ] = useState(false);\r\n\r\n\r\n    useEffect(() => {\r\n    const { toHTML } = require('../Functions/discord-parser.js');\r\n    \r\n    if (user.tag) {\r\n        setTag(user.tag);\r\n    } else setTag('');\r\n\r\n    if (user.tz) {\r\n        setTimezone(user.tz);\r\n    } else setTimezone('');\r\n\r\n    if (user.avatar_url) {\r\n        setAvatar(user.avatar_url)\r\n    } else setAvatar('')\r\n\r\n    if (user.description) {\r\n        setDesc(toHTML(user.description));\r\n        setEditDesc(user.description);\r\n    } else { setDesc(\"(no description)\");\r\n    setEditDesc(\"\");\r\n}}, [user.description, user.tag, user.avatar_url, user.tz]);\r\n\r\nuseEffect(() => {\r\n    autosize(document.querySelector('textarea'));\r\n})\r\n\r\nconst submitEdit = data => {\r\n    if (data.tz) {\r\n        if (!moment.tz.zone(data.tz)) {\r\n        setInvalidTimezone(true);\r\n        return;\r\n        }\r\n    }\r\n\r\n    fetch(`${API_URL}s`,{\r\n        method: 'PATCH',\r\n        body: JSON.stringify(data),\r\n        headers: {\r\n            'Content-Type': 'application/json',\r\n            'Authorization': JSON.stringify(localStorage.getItem(\"token\")).slice(1, -1)\r\n        }}).then (res => res.json()\r\n        ).then ( () => { setUser(prevState => {return {...prevState, ...data}}); localStorage.setItem('user', JSON.stringify(user)); setEditMode(false)}\r\n        ).catch (error => {\r\n            console.error(error);\r\n            setErrorAlert(true);\r\n        })\r\n\r\n    }\r\n\r\nconst submitPrivacy = data => {\r\n    fetch(`${API_URL}s`,{\r\n        method: 'PATCH',\r\n        body: JSON.stringify(data),\r\n        headers: {\r\n          'Content-Type': 'application/json',\r\n          'Authorization': JSON.stringify(localStorage.getItem(\"token\")).slice(1, -1)\r\n        }}).then (res => res.json()\r\n        ).then (data => { setUser(prevState => {return {...prevState, ...data}}); localStorage.setItem('user', JSON.stringify(user)); setPrivacyMode(false)}\r\n        ).catch (error => {\r\n            console.error(error);\r\n            setErrorAlert(true);\r\n        })\r\n}\r\n\r\n        return (\r\n           <BS.Card className=\"mb-3 mt-3 w-100\" >\r\n               <BS.Card.Header className=\"d-flex align-items-center justify-content-between\">\r\n                  <BS.Card.Title className=\"float-left\"><FaAddressCard className=\"mr-3\" /> {user.name}</BS.Card.Title> \r\n                  { user.avatar_url ? <BS.Image src={`${user.avatar_url}`} style={{width: 50, height: 50}} className=\"float-right\" roundedCircle /> : \r\n               <BS.Image src={defaultAvatar} style={{width: 50, height: 50}} className=\"float-right\" roundedCircle />}\r\n               </BS.Card.Header>\r\n               <BS.Card.Body>\r\n               { errorAlert ? <BS.Alert variant=\"danger\">Something went wrong, please try logging in and out again.</BS.Alert> : \"\" }\r\n               { editMode ?  \r\n               <BS.Form onSubmit={handleSubmitEdit(submitEdit)}>\r\n                <BS.Form.Text className='mb-4'><b>Note:</b> if you refresh the page, the old data might show up again, this is due to the bot caching data.<br/>\r\n                Try editing a member to clear the cache, or wait a few minutes before refreshing.</BS.Form.Text>\r\n                <BS.Form.Row>\r\n                <BS.Col className=\"mb-lg-2\" xs={12} lg={3}>\r\n                    <BS.Form.Label>Name:</BS.Form.Label>\r\n               <BS.Form.Control name=\"name\" ref={registerEdit}  defaultValue={user.name}/>\r\n                </BS.Col>\r\n                <BS.Col className=\"mb-lg-2\" xs={12} lg={3}>\r\n                    <BS.Form.Label>Tag:</BS.Form.Label>\r\n                    <BS.Form.Control name=\"tag\" ref={registerEdit}  defaultValue={tag}/>\r\n                </BS.Col>\r\n                <BS.Col className=\"mb-lg-2\" xs={12} lg={3}>\r\n                    <BS.Form.Label>Timezone:</BS.Form.Label>\r\n                    <BS.Form.Control name=\"tz\" ref={registerEdit}  defaultValue={timezone}/>\r\n                    { invalidTimezone ? <BS.Form.Text>Please enter a valid <a href='https://xske.github.io/tz/' rel=\"noreferrer\" target=\"_blank\">timezone</a></BS.Form.Text> : \"\" }\r\n                </BS.Col>\r\n                <BS.Col className=\"mb-lg-2\" xs={12} lg={3}>\r\n                    <BS.Form.Label>Avatar url:</BS.Form.Label> \r\n                    <BS.Form.Control name=\"avatar_url\" ref={registerEdit}   defaultValue={avatar}/>\r\n                </BS.Col>\r\n                </BS.Form.Row>\r\n                <BS.Form.Group className=\"mt-3\">\r\n                <BS.Form.Label>Description:</BS.Form.Label>\r\n                <BS.Form.Control maxLength=\"1000\" as=\"textarea\" name=\"description\" ref={registerEdit} defaultValue={editDesc}/>\r\n            </BS.Form.Group>\r\n                <BS.Button variant=\"light\" onClick={() => setEditMode(false)}>Cancel</BS.Button>  <BS.Button variant=\"primary\" type=\"submit\">Submit</BS.Button>\r\n                </BS.Form> :\r\n               <><BS.Row>\r\n                    <BS.Col className=\"mb-lg-3\" xs={12} lg={3}><b>ID:</b> {user.id}</BS.Col>\r\n                    <BS.Col className=\"mb-lg-3\" xs={12} lg={3}><b>Tag:</b> {tag}</BS.Col>\r\n                    <BS.Col className=\"mb-lg-3\" xs={12} lg={3}><b>Timezone:</b> {timezone}</BS.Col>\r\n                    { privacyView ? \"\" : <BS.Col className=\"mb-lg-3\" xs={12} lg={3}><b>Privacy:</b> <BS.Button variant=\"light\" size=\"sm\" onClick={() => setPrivacyView(true)}>View</BS.Button></BS.Col> }\r\n                </BS.Row>\r\n                { privacyMode ? <BS.Form onSubmit={handleSubmitPrivacy(submitPrivacy)}>\r\n                <hr/>\r\n                <h5>Editing privacy settings</h5>\r\n                    <BS.Form.Row>\r\n                    <BS.Col className=\"mb-lg-2\" xs={12} lg={3}>\r\n                        <BS.Form.Label>Description:</BS.Form.Label>\r\n                        <BS.Form.Control name=\"description_privacy\" as=\"select\" ref={registerPrivacy}>\r\n                            <option>public</option>\r\n                            <option>private</option>\r\n                        </BS.Form.Control>\r\n                    </BS.Col>\r\n                    <BS.Col className=\"mb-lg-2\" xs={12} lg={3}>\r\n                    <BS.Form.Label>Member list:</BS.Form.Label>\r\n                        <BS.Form.Control name=\"member_list_privacy\" as=\"select\" ref={registerPrivacy}>\r\n                            <option>public</option>\r\n                            <option>private</option>\r\n                        </BS.Form.Control>\r\n                    </BS.Col>\r\n                    <BS.Col className=\"mb-lg-2\" xs={12} lg={3}>\r\n                    <BS.Form.Label>Front:</BS.Form.Label>\r\n                        <BS.Form.Control name=\"front_privacy\" as=\"select\" ref={registerPrivacy}>\r\n                            <option>public</option>\r\n                            <option>private</option>\r\n                        </BS.Form.Control>\r\n                    </BS.Col>\r\n                    <BS.Col className=\"mb-lg-2\" xs={12} lg={3}>\r\n                    <BS.Form.Label>Front history:</BS.Form.Label>\r\n                        <BS.Form.Control name=\"front_history_privacy\" as=\"select\" ref={registerPrivacy}>\r\n                            <option>public</option>\r\n                            <option>private</option>\r\n                        </BS.Form.Control>\r\n                    </BS.Col>\r\n                </BS.Form.Row>\r\n                <BS.Button variant=\"light\" onClick={() => setPrivacyMode(false)}>Cancel</BS.Button> <BS.Button variant=\"primary\" type=\"submit\">Submit</BS.Button>                \r\n                <hr/>\r\n            </BS.Form> : privacyView ? <><hr/>\r\n                <h5>Viewing privacy settings</h5>\r\n            <BS.Row>\r\n                <BS.Col className=\"mb-lg-3\" xs={12} lg={3}><b>Description:</b> {user.description_privacy}</BS.Col>\r\n                <BS.Col className=\"mb-lg-3\" xs={12} lg={3}><b>Member list: </b>{user.member_list_privacy}</BS.Col>\r\n                <BS.Col className=\"mb-lg-3\" xs={12} lg={3}><b>Front:</b> {user.front_privacy}</BS.Col> \r\n                <BS.Col className=\"mb-lg-3\" xs={12} lg={3}><b>Front history:</b> {user.front_history_privacy}</BS.Col>\r\n            </BS.Row>\r\n            <BS.Button variant=\"light\" onClick={() => setPrivacyView(false)}>Exit</BS.Button>  <BS.Button variant=\"primary\" onClick={() => setPrivacyMode(true)}>Edit</BS.Button>\r\n            <hr/></> : \"\" }\r\n                <p><b>Description:</b></p>\r\n                <p dangerouslySetInnerHTML={{__html: desc}}></p>\r\n                { privacyMode ? \"\" : privacyView ? \"\" : <BS.Button variant=\"light\" onClick={() => setEditMode(true)}>Edit</BS.Button>}</> }\r\n                </BS.Card.Body>\r\n           </BS.Card>\r\n        )\r\n}\r\n\r\n   \r\n\r\n    ","import React, { useEffect, useState } from 'react';\r\nimport  * as BS from 'react-bootstrap'\r\nimport { useForm } from \"react-hook-form\";\r\nimport moment from 'moment';\r\nimport Popup from 'reactjs-popup';\r\nimport 'reactjs-popup/dist/index.css';\r\nimport autosize from 'autosize';\r\nimport LazyLoad from 'react-lazyload';\r\n\r\nimport API_URL from \"../Constants/constants.js\";\r\n\r\nimport defaultAvatar from '../default_discord_avatar.png'\r\nimport { FaUser, FaTrashAlt } from \"react-icons/fa\";\r\n\r\nexport default function MemberCard(props) {\r\n\r\n    const [member, setMember] = useState(props.member);\r\n\r\n    const [ displayName, setDisplayName ] = useState(\"\");\r\n    const [ birthday, setBirthday ] = useState(\"\");\r\n    const [ birthdate, setBirthdate ] = useState(\"\");\r\n    const [ pronouns, setPronouns ] = useState(\"\");\r\n    const [ avatar, setAvatar ] = useState(\"\");\r\n    const [ color, setColor ] = useState(\"\");\r\n    const [ desc, setDesc ] = useState(\"\");\r\n    const [ editDesc, setEditDesc ] = useState(\"\");\r\n    const [ proxyTags, setProxyTags ] = useState(member.proxy_tags);\r\n\r\n    const [ editMode, setEditMode ] = useState(false);\r\n    const [ privacyMode, setPrivacyMode ] = useState(false);\r\n    const [ privacyView, setPrivacyView ] = useState(false);\r\n    const [ proxyView, setProxyView ] = useState(false);\r\n    const [ proxyMode, setProxyMode ] = useState(false);\r\n    \r\n    const [open, setOpen] = useState(false);\r\n    const closeModal = () => setOpen(false);\r\n\r\n    const [ errorAlert, setErrorAlert ] = useState(false);\r\n    const [ wrongID, setWrongID ] = useState(false);\r\n    const [ memberDeleted, setMemberDeleted ] = useState(false);\r\n\r\n    const {\r\n        register: registerEdit,\r\n        handleSubmit: handleSubmitEdit\r\n      } = useForm();\r\n\r\n    const {\r\n        register: registerPrivacy,\r\n        handleSubmit: handleSubmitPrivacy\r\n      } = useForm();\r\n\r\n    const {\r\n        register: registerDelete,\r\n        handleSubmit: handleSubmitDelete\r\n      } = useForm();\r\n  \r\n      const {\r\n        register: registerProxy,\r\n        handleSubmit: handleSubmitProxy,\r\n        } = useForm();\r\n\r\n        useEffect(() => {\r\n            autosize(document.querySelector('textarea'));\r\n        })\r\n\r\n    useEffect(() => {\r\n        const { toHTML } = require('../Functions/discord-parser.js');\r\n\r\n        if (member.display_name) {\r\n            setDisplayName(member.display_name)\r\n        } else setDisplayName('')\r\n\r\n        if (member.birthday) { \r\n            setBirthdate(member.birthday)\r\n            if (member.birthday.startsWith('0004-')) {\r\n                var bday = member.birthday.replace('0004-','');\r\n                var bdaymoment = moment(bday, 'MM-DD').format('MMM D');\r\n                setBirthday(bdaymoment);\r\n            } else {\r\n                var birthdaymoment =  moment(member.birthday, 'YYYY-MM-DD').format('MMM D, YYYY');\r\n                setBirthday(birthdaymoment);\r\n            }\r\n        } else { setBirthday('');\r\n        setBirthdate('');\r\n    }\r\n\r\n        if (member.pronouns) {\r\n            setPronouns(member.pronouns)\r\n        } else setPronouns('')\r\n\r\n        if (member.avatar_url) {\r\n            setAvatar(member.avatar_url)\r\n        } else setAvatar('')\r\n\r\n        if (member.color) {\r\n            setColor(member.color);\r\n        } else setColor('');\r\n\r\n        if (member.description) {\r\n            setDesc(toHTML(member.description));\r\n            setEditDesc(member.description);\r\n        } else { setDesc(\"(no description)\");\r\n        setEditDesc(\"\");\r\n    }\r\n    }, [member.description, member.color, member.birthday, member.display_name, member.pronouns, member.avatar_url, member.proxy_tags]);\r\n\r\n    const submitEdit = data => {\r\n        fetch(`${API_URL}m/${member.id}`,{\r\n            method: 'PATCH',\r\n            body: JSON.stringify(data),\r\n            headers: {\r\n              'Content-Type': 'application/json',\r\n              'Authorization': JSON.stringify(localStorage.getItem(\"token\")).slice(1, -1)\r\n            }}).then (res => res.json()\r\n            ).then (data => { \r\n                setMember(prevState => {return {...prevState, ...data}});\r\n                setErrorAlert(false);\r\n                setEditMode(false);\r\n        }\r\n            ).catch (error => {\r\n                console.error(error);\r\n                setErrorAlert(true);\r\n            });\r\n    }\r\n\r\n    const submitPrivacy = data => {\r\n        fetch(`${API_URL}m/${member.id}`,{\r\n            method: 'PATCH',\r\n            body: JSON.stringify(data),\r\n            headers: {\r\n              'Content-Type': 'application/json',\r\n              'Authorization': JSON.stringify(localStorage.getItem(\"token\")).slice(1, -1)\r\n            }}).then (res => res.json()\r\n            ).then (data => {\r\n                setMember(prevState => {return {...prevState, ...data}});\r\n                setErrorAlert(false); \r\n                setPrivacyMode(false)\r\n        }\r\n            ).catch (error => {\r\n                console.error(error);\r\n                setErrorAlert(true);\r\n             })\r\n    }\r\n\r\n    const deleteMember = data => {\r\n        if (data.memberID !== member.id) {\r\n        setWrongID(true);\r\n        } else {\r\n            fetch(`${API_URL}m/${member.id}`,{\r\n                method: 'DELETE',\r\n                headers: {\r\n                'Authorization': JSON.stringify(localStorage.getItem(\"token\")).slice(1, -1)\r\n                }}).then (() => {\r\n                    setErrorAlert(false);\r\n                    setMemberDeleted(true);\r\n                })\r\n                .catch (error => {\r\n                    console.error(error);\r\n                    setErrorAlert(true);\r\n                })\r\n        }\r\n    }\r\n\r\n    function addProxyField() {\r\n        setProxyTags(oldTags => [...oldTags, {prefix: '', suffix: ''}] )\r\n    }\r\n\r\n    function resetProxyFields() {\r\n        setProxyMode(false);\r\n        setProxyTags(member.proxy_tags);\r\n    }\r\n\r\n    const submitProxy = data => {\r\n\r\n        const newdata = {proxy_tags: data.proxy_tags.filter(tag => !(tag.prefix === \"\" && tag.suffix === \"\"))}\r\n\r\n        fetch(`${API_URL}m/${member.id}`,{\r\n            method: 'PATCH',\r\n            body: JSON.stringify(newdata),\r\n            headers: {\r\n              'Content-Type': 'application/json',\r\n              'Authorization': JSON.stringify(localStorage.getItem(\"token\")).slice(1, -1)\r\n            }}).then (res => res.json()\r\n            ).then (data => { \r\n                setMember(prevState => {return {...prevState, ...data}}); \r\n                setProxyTags(data.proxy_tags); \r\n                setErrorAlert(false)\r\n                setProxyMode(false);\r\n        }\r\n            ).catch (error => {\r\n                console.error(error);\r\n                setErrorAlert(true);\r\n            });\r\n    }    \r\n\r\n    return (\r\n       memberDeleted ? <BS.Card.Header className=\"d-flex align-items-center justify-content-between\"><BS.Button variant=\"link\" className=\"float-left\"><FaTrashAlt className=\"mr-4\"/>Member Deleted</BS.Button></BS.Card.Header> :\r\n       <LazyLoad offset={100}>\r\n           <BS.Card.Header className=\"d-flex align-items-center justify-content-between\">\r\n        <BS.Accordion.Toggle  as={BS.Button} variant=\"link\" eventKey={member.id} className=\"float-left\"><FaUser className=\"mr-4\" /> <b>{member.name}</b> ({member.id})</BS.Accordion.Toggle>\r\n            { member.avatar_url ? <BS.Image src={`${member.avatar_url}`} style={{width: 50, height: 50}} className=\"float-right\" roundedCircle /> : \r\n        <BS.Image src={defaultAvatar} style={{width: 50, height: 50}} className=\"float-right\" roundedCircle />}     \r\n        </BS.Card.Header>\r\n        <BS.Accordion.Collapse eventKey={member.id}>\r\n            <BS.Card.Body style={{borderLeft: `5px solid #${color}` }}>\r\n                { errorAlert ? <BS.Alert variant=\"danger\">Something went wrong, please try logging in and out again.</BS.Alert> : \"\" }\r\n                { editMode ?\r\n                <>\r\n                <BS.Form id='Edit' onSubmit={handleSubmitEdit(submitEdit)}>\r\n                <BS.Form.Row>\r\n                <BS.Col className=\"mb-lg-2\" xs={12} lg={3}>\r\n                    <BS.Form.Label>Name:</BS.Form.Label>\r\n                   <BS.Form.Control name=\"name\" ref={registerEdit} defaultValue={member.name} />\r\n                </BS.Col>\r\n                <BS.Col className=\"mb-lg-2\" xs={12} lg={3}>\r\n                    <BS.Form.Label>Display name: </BS.Form.Label>\r\n                    <BS.Form.Control name=\"display_name\" ref={registerEdit}  defaultValue={displayName} />\r\n                </BS.Col>\r\n                <BS.Col className=\"mb-lg-2\" xs={12} lg={3}>\r\n                    <BS.Form.Label>Birthday:</BS.Form.Label>\r\n                    <BS.Form.Control  pattern=\"^\\d{4}\\-(0[1-9]|1[012])\\-(0[1-9]|[12][0-9]|3[01])$\" name=\"birthday\" ref={registerEdit}  defaultValue={birthdate}/>\r\n                    <BS.Form.Text>(YYYY-MM-DD)</BS.Form.Text>\r\n                </BS.Col>\r\n                <BS.Col className=\"mb-lg-2\" xs={12} lg={3}>\r\n                    <BS.Form.Label>Pronouns:</BS.Form.Label>\r\n                    <BS.Form.Control name=\"pronouns\" ref={registerEdit} defaultValue={pronouns} />\r\n                </BS.Col>\r\n                <BS.Col className=\"mb-lg-2\" xs={12} lg={3}>\r\n                    <BS.Form.Label>Avatar url:</BS.Form.Label> \r\n                  <BS.Form.Control type=\"url\" name=\"avatar_url\" ref={registerEdit}  defaultValue={avatar} />\r\n                </BS.Col>\r\n                <BS.Col className=\"mb-lg-2\" xs={12} lg={3}>\r\n                    <BS.Form.Label>Color:</BS.Form.Label> \r\n                   <BS.Form.Control  pattern=\"[A-Fa-f0-9]{6}\" name=\"color\" ref={registerEdit}  defaultValue={color} />\r\n                    <BS.Form.Text>(hexcode)</BS.Form.Text>\r\n                </BS.Col>\r\n            </BS.Form.Row>\r\n            <BS.Form.Group className=\"mt-3\">\r\n                <BS.Form.Label>Description:</BS.Form.Label>\r\n                <BS.Form.Control maxLength=\"1000\" as=\"textarea\" name=\"description\" ref={registerEdit} defaultValue={editDesc}/>\r\n            </BS.Form.Group>\r\n            <BS.Button variant=\"light\" onClick={() => setEditMode(false)}>Cancel</BS.Button> <BS.Button variant=\"primary\" type=\"submit\">Submit</BS.Button> <BS.Button variant=\"danger\" className=\"float-right\" onClick={() => setOpen(o => !o)}>Delete</BS.Button>\r\n            </BS.Form>\r\n                   <Popup open={open} position=\"top-center\" modal>\r\n                       <BS.Container>\r\n                       <BS.Card>\r\n                           <BS.Card.Header>\r\n                               <h5><FaTrashAlt className=\"mr-3\"/> Are you sure you want to delete {member.name}?</h5>\r\n                           </BS.Card.Header>\r\n                           <BS.Card.Body>\r\n                             { wrongID ? <BS.Alert variant=\"danger\">Incorrect ID, please check the spelling.</BS.Alert> : \"\" }\r\n                               <p>If you're sure you want to delete this member, please enter the member ID ({member.id}) below.</p>\r\n                               <BS.Form id='Delete' onSubmit={handleSubmitDelete(deleteMember)}>\r\n                                   <BS.Form.Label>Member ID:</BS.Form.Label>\r\n                                   <BS.Form.Control className=\"mb-4\" name=\"memberID\" ref={registerDelete({required: true})} placeholder={member.id} />\r\n                                   <BS.Button variant=\"danger\" type=\"submit\">Delete</BS.Button> <BS.Button variant=\"light\" className=\"float-right\" onClick={closeModal}>Cancel</BS.Button>\r\n                               </BS.Form>\r\n                           </BS.Card.Body>\r\n                       </BS.Card>\r\n                       </BS.Container>\r\n                    </Popup></>\r\n                 :\r\n            <>\r\n            <BS.Row>\r\n                <BS.Col className=\"mb-lg-3\" xs={12} lg={3}><b>ID:</b> {member.id}</BS.Col>\r\n                { member.display_name ? <BS.Col className=\"mb-lg-3\" xs={12} lg={3}><b>Display name: </b>{displayName}</BS.Col> : \"\" }\r\n                { member.birthday ? <BS.Col className=\"mb-lg-3\" xs={12} lg={3}><b>Birthday:</b> {birthday}</BS.Col> : \"\" }\r\n                { member.pronouns ? <BS.Col className=\"mb-lg-3\" xs={12} lg={3}><b>Pronouns:</b> {pronouns}</BS.Col> : \"\" }\r\n                { member.color ? <BS.Col className=\"mb-lg-3\" xs={12} lg={3}><b>Color:</b> {color}</BS.Col> : \"\" }\r\n                { privacyView ? \"\" : proxyView ? \"\" : <BS.Col className=\"mb-lg-3\" xs={12} lg={3}><b>Privacy:</b> <BS.Button variant=\"light\" size=\"sm\" onClick={() => setPrivacyView(true)}>View</BS.Button></BS.Col> }\r\n                { privacyView ? \"\" : proxyView ? \"\" : <BS.Col className=\"mb-lg-3\" xs={12} lg={3}><b>Proxy tags:</b> <BS.Button variant=\"light\" size=\"sm\" onClick={() => setProxyView(true)}>View</BS.Button></BS.Col> }\r\n                \r\n            </BS.Row>\r\n            { privacyMode ? <BS.Form id='Privacy' onSubmit={handleSubmitPrivacy(submitPrivacy)}>\r\n                <hr/>\r\n                <h5>Editing privacy settings</h5>\r\n                    <BS.Form.Row>\r\n                    <BS.Col className=\"mb-lg-2\" xs={12} lg={3}>\r\n                        <BS.Form.Label>Visibility:</BS.Form.Label>\r\n                        <BS.Form.Control name=\"visibility\" as=\"select\" ref={registerPrivacy}>\r\n                            <option>public</option>\r\n                            <option>private</option>\r\n                        </BS.Form.Control>\r\n                    </BS.Col>\r\n                    <BS.Col className=\"mb-lg-2\" xs={12} lg={3}>\r\n                    <BS.Form.Label>Name:</BS.Form.Label>\r\n                        <BS.Form.Control name=\"name_privacy\" as=\"select\" ref={registerPrivacy}>\r\n                            <option>public</option>\r\n                            <option>private</option>\r\n                        </BS.Form.Control>\r\n                    </BS.Col>\r\n                    <BS.Col className=\"mb-lg-2\" xs={12} lg={3}>\r\n                    <BS.Form.Label>Description:</BS.Form.Label>\r\n                        <BS.Form.Control name=\"description_privacy\" as=\"select\" ref={registerPrivacy}>\r\n                            <option>public</option>\r\n                            <option>private</option>\r\n                        </BS.Form.Control>\r\n                    </BS.Col>\r\n                    <BS.Col className=\"mb-lg-2\" xs={12} lg={3}>\r\n                    <BS.Form.Label>Birthday:</BS.Form.Label>\r\n                        <BS.Form.Control name=\"birthday_privacy\" as=\"select\" ref={registerPrivacy}>\r\n                            <option>public</option>\r\n                            <option>private</option>\r\n                        </BS.Form.Control>\r\n                    </BS.Col>\r\n                    <BS.Col className=\"mb-lg-2\" xs={12} lg={3}>\r\n                    <BS.Form.Label>Pronouns:</BS.Form.Label>\r\n                        <BS.Form.Control name=\"pronoun_privacy\" as=\"select\" ref={registerPrivacy}>\r\n                            <option>public</option>\r\n                            <option>private</option>\r\n                        </BS.Form.Control>\r\n                    </BS.Col>\r\n                    <BS.Col className=\"mb-3\" xs={12} lg={3}>\r\n                    <BS.Form.Label>Meta:</BS.Form.Label>\r\n                        <BS.Form.Control name=\"metadata_privacy\" as=\"select\" ref={registerPrivacy}>\r\n                            <option>public</option>\r\n                            <option>private</option>\r\n                        </BS.Form.Control>\r\n                    </BS.Col>\r\n                </BS.Form.Row>\r\n                <BS.Button variant=\"light\" onClick={() => setPrivacyMode(false)}>Cancel</BS.Button> <BS.Button variant=\"primary\" type=\"submit\">Submit</BS.Button>                \r\n                <hr/>\r\n            </BS.Form> : privacyView ? <><hr/>\r\n                <h5>Viewing privacy settings</h5>\r\n            <BS.Row>\r\n                <BS.Col className=\"mb-lg-3\" xs={12} lg={3}><b>Visibility:</b> {member.visibility}</BS.Col>\r\n                <BS.Col className=\"mb-lg-3\" xs={12} lg={3}><b>Name: </b>{member.name_privacy}</BS.Col>\r\n                <BS.Col className=\"mb-lg-3\" xs={12} lg={3}><b>Description:</b> {member.description_privacy}</BS.Col> \r\n                <BS.Col className=\"mb-lg-3\" xs={12} lg={3}><b>Birthday:</b> {member.birthday_privacy}</BS.Col>\r\n                <BS.Col className=\"mb-lg-3\" xs={12} lg={3}><b>Pronouns:</b> {member.pronoun_privacy}</BS.Col>\r\n                <BS.Col className=\"mb-3\" xs={12} lg={3}><b>Meta:</b> {member.metadata_privacy}</BS.Col>\r\n            </BS.Row>\r\n         <BS.Button variant=\"light\" onClick={() => setPrivacyView(false)}>Exit</BS.Button>  <BS.Button variant=\"primary\" onClick={() => setPrivacyMode(true)}>Edit</BS.Button>\r\n         <hr/></> : \"\" }\r\n         { proxyMode ?\r\n         <><hr/>\r\n         <h5>Editing proxy tags</h5>\r\n         <BS.Form onSubmit={handleSubmitProxy(submitProxy)}>\r\n             <BS.Form.Row>\r\n                { proxyTags.map((item, index) => (\r\n                    <BS.Col key={item.id} className=\"mb-lg-2\" xs={12} lg={2}>\r\n                        <BS.Form.Row>\r\n                        <BS.InputGroup className=\"ml-1 mr-1 mb-1\">\r\n                        <BS.Form.Control name={`proxy_tags[${index}].prefix`} defaultValue={item.prefix} ref={registerProxy}/> \r\n                        <BS.Form.Control disabled placeholder='text'/>\r\n                        <BS.Form.Control name={`proxy_tags[${index}].suffix`} defaultValue={item.suffix} ref={registerProxy}/>\r\n                        </BS.InputGroup>\r\n                        </BS.Form.Row>\r\n                    </BS.Col>\r\n                ))} <BS.Col className=\"mb-2\" xs={12} lg={2}><BS.Button block variant=\"light\" onClick={() => addProxyField()}>Add new</BS.Button></BS.Col>\r\n             </BS.Form.Row>\r\n             <BS.Button variant=\"light\" onClick={() => resetProxyFields()}>Exit</BS.Button> <BS.Button variant=\"primary\" type=\"submit\">Submit</BS.Button>\r\n        </BS.Form><hr/></> : proxyView ? \r\n         <><hr/>\r\n             <h5>Viewing proxy tags</h5>\r\n         <BS.Row className=\"mb-2\">\r\n          { proxyTags.length === 0 ? <BS.Col className=\"mb-lg-2\"><b>No proxy tags set.</b></BS.Col> : proxyTags.map((proxytag) => <BS.Col key={proxytag.index} className=\"mb-lg-2\" xs={12} lg={2}> <code>{proxytag.prefix}text{proxytag.suffix}</code></BS.Col> )}\r\n         </BS.Row>\r\n         <BS.Button variant=\"light\" onClick={() => setProxyView(false)}>Exit</BS.Button>  <BS.Button variant=\"primary\" onClick={() => setProxyMode(true)}>Edit</BS.Button>\r\n            <hr/></> : \"\" }\r\n            <p><b>Description:</b></p>\r\n            <p dangerouslySetInnerHTML={{__html: desc}}></p>\r\n                { proxyView ? \"\" : privacyMode ? \"\" : privacyView ? \"\" : <BS.Button variant=\"light\" onClick={() => setEditMode(true)}>Edit</BS.Button>}\r\n            </> } </BS.Card.Body>\r\n        </BS.Accordion.Collapse>\r\n        </LazyLoad>\r\n        \r\n    )\r\n}\r\n","import React from 'react';\r\nimport  * as BS from 'react-bootstrap'\r\n\r\nexport default function Loading() {\r\n    return (\r\n        <BS.Container fluid className=\"text-center\"><BS.Spinner animation=\"border\" /></BS.Container>\r\n    )\r\n}","import React, { useEffect, useState, useCallback } from 'react';\r\nimport  * as BS from 'react-bootstrap'\r\nimport Popup from 'reactjs-popup';\r\nimport 'reactjs-popup/dist/index.css';\r\nimport { useForm } from \"react-hook-form\";\r\n\r\nimport MemberCard from './MemberCard.js'\r\nimport Loading from \"./Loading.js\";\r\nimport API_URL from \"../Constants/constants.js\";\r\n\r\nimport { FaPlus } from \"react-icons/fa\";\r\n\r\nexport default function Memberlist(props) {\r\n    \r\n    const user = JSON.parse(localStorage.getItem('user'));\r\n    const userId = user.id;\r\n\r\n    const [isLoading, setIsLoading ] = useState(false);\r\n    const [isError, setIsError ] = useState(false);\r\n    const [errorAlert, setErrorAlert ] = useState(false);\r\n\r\n    const [proxyView, setProxyView] = useState(false);\r\n    const [privacyView, setPrivacyView] = useState(false);\r\n    const [currentPage, setCurrentPage] = useState(1);\r\n    const [membersPerPage, setMembersPerPage] = useState(25);\r\n\r\n    const [open, setOpen] = useState(false);\r\n    const closeModal = () => setOpen(false);\r\n\r\n    const [members, setMembers ] = useState([]);\r\n    const [newMember, setNewMember ] = useState('');\r\n    const [value, setValue] = useState('');\r\n    const [proxyTags, setProxyTags] = useState([{\r\n      prefix: \"\", suffix: \"\"\r\n    }]);\r\n\r\n    const {register, handleSubmit} = useForm();\r\n\r\n  const fetchMembers = useCallback( () => {\r\n    setIsLoading(true);\r\n    setIsError(false);\r\n    setMembersPerPage(25);\r\n\r\n     fetch(`${API_URL}s/${userId}/members`,{\r\n    method: 'get',\r\n    headers: {\r\n      'Authorization': JSON.stringify(localStorage.getItem(\"token\")).slice(1, -1)\r\n    }}).then ( res => res.json()\r\n    ).then (data => { \r\n      newMember ? setMembers([...data, newMember]) : setMembers(data)\r\n      setIsLoading(false);\r\n  })\r\n    .catch (error => { \r\n        console.log(error);\r\n        setIsError(true);\r\n        setIsLoading(false);\r\n    })\r\n  }, [newMember, userId])\r\n\r\n  useEffect(() => {\r\n    fetchMembers();\r\n  }, [fetchMembers])\r\n\r\n    function addProxyField() {\r\n      setProxyTags(oldTags => [...oldTags, {prefix: '', suffix: ''}] )\r\n    }\r\n\r\n    const submitMember = data => {\r\n      setIsLoading(true);\r\n\r\n      const newdata = data.proxy_tags ? {...data, proxy_tags: data.proxy_tags.filter(tag => !(tag.prefix === \"\" && tag.suffix === \"\"))} : data\r\n\r\n      fetch(`${API_URL}m/`,{\r\n        method: 'POST',\r\n        body: JSON.stringify(newdata),\r\n        headers: {\r\n          'Content-Type': 'application/json',\r\n          'Authorization': JSON.stringify(localStorage.getItem(\"token\")).slice(1, -1)\r\n        }}).then (res => res.json()\r\n        ).then (data => { \r\n            setNewMember(data); \r\n            setErrorAlert(false);\r\n            closeModal();\r\n    }\r\n        ).catch (error => {\r\n            console.error(error);\r\n            setErrorAlert(true);\r\n        });\r\n    }\r\n\r\n    const indexOfLastMember = currentPage * membersPerPage;\r\n    const indexOfFirstMember = indexOfLastMember - membersPerPage;\r\n    const currentMembers =  members.filter(member => {\r\n      if (!value) return true;\r\n      if (member.name.toLowerCase().includes(value.toLowerCase())) {\r\n        return true;\r\n      }\r\n      return false;\r\n    }).sort((a, b) => a.name.localeCompare(b.name)).slice(indexOfFirstMember, indexOfLastMember);\r\n\r\n\r\n    const active = currentPage;\r\n    const pageAmount = Math.ceil(members.length / membersPerPage);\r\n    const pageNumbers = [];\r\n    for ( let i = currentPage; (i <= currentPage + 1) && (i < pageAmount); i++ ) {\r\n      pageNumbers.push(\r\n      <BS.Pagination.Item key={i}  onClick={() => setCurrentPage(i)} active={i === active}>{i}</BS.Pagination.Item>\r\n      );\r\n    }\r\n      \r\n      const memberList = currentMembers.map((member, index) => <BS.Card key={member.id}>\r\n        <MemberCard\r\n        member={member} \r\n        />\r\n    </BS.Card>\r\n    );\r\n\r\n    return (\r\n        <>\r\n        { isLoading ? <Loading /> : isError ? \r\n        <BS.Alert variant=\"danger\">Error fetching members.</BS.Alert> :\r\n        <>\r\n        <BS.Row noGutters=\"true\" className=\"justify-content-md-center\">\r\n        <BS.Col className=\"lg-2 mb-3\" xs={12} lg={3}>\r\n        <BS.Form>\r\n          <BS.InputGroup className=\"mb-3\">\r\n          <BS.Form.Control disabled placeholder='Page length:'/>\r\n            <BS.Form.Control as=\"select\" onChange={e => {\r\n              setMembersPerPage(e.target.value);\r\n              setCurrentPage(1);\r\n              }}>\r\n              <option>10</option>\r\n              <option selected>25</option>\r\n              <option>50</option>\r\n              <option>100</option>\r\n            </BS.Form.Control>\r\n            </BS.InputGroup>\r\n        </BS.Form>\r\n        </BS.Col>\r\n        <BS.Col className=\"ml-lg-2 mb-3\" xs={12} lg={4}>\r\n        <BS.Form>\r\n            <BS.Form.Control value={value} onChange={e => {setValue(e.target.value); setCurrentPage(1)}} placeholder=\"Search\"/>\r\n        </BS.Form>\r\n        </BS.Col>\r\n        <BS.Col className=\"ml-lg-2 mb-3\" xs={12} lg={1}>\r\n          <BS.Button type=\"primary\" className=\"m-0\" block onClick={() => fetchMembers()}>Refresh</BS.Button>\r\n        </BS.Col>\r\n        </BS.Row>\r\n        <BS.Row className=\"justify-content-md-center\">\r\n          <BS.Pagination className=\"ml-auto mr-auto\">\r\n          { currentPage === 1 ? <BS.Pagination.Prev disabled/> : <BS.Pagination.Prev onClick={() => setCurrentPage(currentPage - 1)} />}\r\n          <BS.Pagination.Item  onClick={() => setCurrentPage(1)} active={1 === active}>{1}</BS.Pagination.Item>\r\n          <BS.Pagination.Ellipsis />\r\n          { currentPage > 1 ? <BS.Pagination.Item  onClick={() => setCurrentPage(currentPage - 1)} active={currentPage - 1 === active}>{currentPage - 1}</BS.Pagination.Item> : \"\" }\r\n          {pageNumbers}\r\n          <BS.Pagination.Ellipsis />\r\n          <BS.Pagination.Item  onClick={() => setCurrentPage(pageAmount)} active={pageAmount === active}>{pageAmount}</BS.Pagination.Item>\r\n          { currentPage === pageAmount ? <BS.Pagination.Next disabled /> :<BS.Pagination.Next onClick={() => setCurrentPage(currentPage + 1)} />}\r\n          </BS.Pagination>\r\n        </BS.Row>\r\n        <BS.Card className=\"w-100\">\r\n          <BS.Card.Header className=\"d-flex align-items-center justify-content-between\">\r\n            <BS.Button variant=\"link\" className=\"float-left\" onClick={() => setOpen(o => !o)}><FaPlus className=\"mr-4\"/>Add Member</BS.Button> \r\n            <Popup open={open} position=\"top-center\" modal>\r\n              <BS.Container>\r\n                <BS.Card>\r\n                  <BS.Card.Header>\r\n                      <h5><FaPlus className=\"mr-3\"/> Add member </h5>\r\n                  </BS.Card.Header>\r\n                  <BS.Card.Body>\r\n                  { errorAlert ? <BS.Alert variant=\"danger\">Something went wrong, please try logging in and out again.</BS.Alert> : \"\" }\r\n                    <BS.Form onSubmit={handleSubmit(submitMember)}>\r\n                            <BS.Form.Text>\r\n                            </BS.Form.Text>\r\n                            <BS.Form.Row>\r\n                        <BS.Col className=\"mb-lg-2\" xs={12} lg={3}>\r\n                            <BS.Form.Label>Name:</BS.Form.Label>\r\n                          <BS.Form.Control name=\"name\" ref={register()} defaultValue={''} required/>\r\n                        </BS.Col>\r\n                        <BS.Col className=\"mb-lg-2\" xs={12} lg={3}>\r\n                            <BS.Form.Label>Display name: </BS.Form.Label>\r\n                            <BS.Form.Control name=\"display_name\" ref={register}  defaultValue={''} />\r\n                        </BS.Col>\r\n                        <BS.Col className=\"mb-lg-2\" xs={12} lg={3}>\r\n                            <BS.Form.Label>Birthday:</BS.Form.Label>\r\n                            <BS.Form.Control  pattern=\"^\\d{4}\\-(0[1-9]|1[012])\\-(0[1-9]|[12][0-9]|3[01])$\" name=\"birthday\" ref={register}  defaultValue={''}/>\r\n                            <BS.Form.Text>(YYYY-MM-DD)</BS.Form.Text>\r\n                        </BS.Col>\r\n                        <BS.Col className=\"mb-lg-2\" xs={12} lg={3}>\r\n                            <BS.Form.Label>Pronouns:</BS.Form.Label>\r\n                            <BS.Form.Control name=\"pronouns\" ref={register} defaultValue={''} />\r\n                        </BS.Col>\r\n                        <BS.Col className=\"mb-lg-2\" xs={12} lg={3}>\r\n                            <BS.Form.Label>Avatar url:</BS.Form.Label> \r\n                          <BS.Form.Control type=\"url\" name=\"avatar_url\" ref={register}  defaultValue={''} />\r\n                        </BS.Col>\r\n                        <BS.Col className=\"mb-lg-2\" xs={12} lg={3}>\r\n                            <BS.Form.Label>Color:</BS.Form.Label> \r\n                          <BS.Form.Control  pattern=\"[A-Fa-f0-9]{6}\" name=\"color\" ref={register}  defaultValue={''} />\r\n                            <BS.Form.Text>(hexcode)</BS.Form.Text>\r\n                        </BS.Col>\r\n                        <BS.Col className=\"mb-lg-2\" xs={12} lg={2}>\r\n                            <BS.Form.Label>Proxy tags:</BS.Form.Label> \r\n                            <BS.Button variant=\"primary\" block onClick={() => setProxyView(view => !view)}> { proxyView ? \"Hide\" : \"Show\" }</BS.Button>\r\n                        </BS.Col>\r\n                        <BS.Col className=\"mb-lg-2\" xs={12} lg={2}>\r\n                            <BS.Form.Label>Privacy settings:</BS.Form.Label> \r\n                            <BS.Button variant=\"primary\" block onClick={() => setPrivacyView(view => !view)}> { privacyView ? \"Hide\" : \"Show\" }</BS.Button>\r\n                        </BS.Col>\r\n                    </BS.Form.Row>\r\n                    <hr/>\r\n                    { proxyView ? <>\r\n                <h5>Proxy Tags</h5>\r\n                    <BS.Form.Row>\r\n                  { proxyTags.map((item, index) => (\r\n                    <BS.Col key={index} className=\"mb-lg-2\" xs={12} lg={2}>\r\n                        <BS.Form.Row>\r\n                        <BS.InputGroup className=\"ml-1 mr-1 mb-1\">\r\n                        <BS.Form.Control name={`proxy_tags[${index}].prefix`} defaultValue={item.prefix} ref={register}/> \r\n                        <BS.Form.Control disabled placeholder='text'/>\r\n                        <BS.Form.Control name={`proxy_tags[${index}].suffix`} defaultValue={item.suffix} ref={register}/>\r\n                        </BS.InputGroup>\r\n                        </BS.Form.Row>\r\n                    </BS.Col>\r\n                ))} <BS.Col className=\"mb-lg-2\" xs={12} lg={2}><BS.Button block variant=\"light\" onClick={() => addProxyField()}>Add new</BS.Button></BS.Col>\r\n             </BS.Form.Row>\r\n                    <hr/></> : \"\" }\r\n                { privacyView ? <><h5>privacy settings</h5>\r\n                    <BS.Form.Row>\r\n                    <BS.Col className=\"mb-lg-2\" xs={12} lg={3}>\r\n                        <BS.Form.Label>Visibility:</BS.Form.Label>\r\n                        <BS.Form.Control name=\"visibility\" as=\"select\" ref={register}>\r\n                            <option>public</option>\r\n                            <option>private</option>\r\n                        </BS.Form.Control>\r\n                    </BS.Col>\r\n                    <BS.Col className=\"mb-lg-2\" xs={12} lg={3}>\r\n                    <BS.Form.Label>Name:</BS.Form.Label>\r\n                        <BS.Form.Control name=\"name_privacy\" as=\"select\" ref={register}>\r\n                            <option>public</option>\r\n                            <option>private</option>\r\n                        </BS.Form.Control>\r\n                    </BS.Col>\r\n                    <BS.Col className=\"mb-lg-2\" xs={12} lg={3}>\r\n                    <BS.Form.Label>Description:</BS.Form.Label>\r\n                        <BS.Form.Control name=\"description_privacy\" as=\"select\" ref={register}>\r\n                            <option>public</option>\r\n                            <option>private</option>\r\n                        </BS.Form.Control>\r\n                    </BS.Col>\r\n                    <BS.Col className=\"mb-lg-2\" xs={12} lg={3}>\r\n                    <BS.Form.Label>Birthday:</BS.Form.Label>\r\n                        <BS.Form.Control name=\"birthday_privacy\" as=\"select\" ref={register}>\r\n                            <option>public</option>\r\n                            <option>private</option>\r\n                        </BS.Form.Control>\r\n                    </BS.Col>\r\n                    <BS.Col className=\"mb-lg-2\" xs={12} lg={3}>\r\n                    <BS.Form.Label>Pronouns:</BS.Form.Label>\r\n                        <BS.Form.Control name=\"pronoun_privacy\" as=\"select\" ref={register}>\r\n                            <option>public</option>\r\n                            <option>private</option>\r\n                        </BS.Form.Control>\r\n                    </BS.Col>\r\n                    <BS.Col className=\"mb-3\" xs={12} lg={3}>\r\n                    <BS.Form.Label>Meta:</BS.Form.Label>\r\n                        <BS.Form.Control name=\"metadata_privacy\" as=\"select\" ref={register}>\r\n                            <option>public</option>\r\n                            <option>private</option>\r\n                        </BS.Form.Control>\r\n                    </BS.Col>\r\n                </BS.Form.Row>               \r\n                <hr/></> : \"\" }\r\n                <BS.Form.Group className=\"mt-3\">\r\n                        <BS.Form.Label>Description:</BS.Form.Label>\r\n                        <BS.Form.Control maxLength=\"1000\" as=\"textarea\" rows=\"7\" name=\"description\" ref={register} defaultValue={''}/>\r\n                    </BS.Form.Group>\r\n                    <BS.Button variant=\"primary\" type=\"submit\">Submit</BS.Button> <BS.Button variant=\"light\" className=\"float-right\" onClick={closeModal}>Cancel</BS.Button>\r\n                    </BS.Form>\r\n                  </BS.Card.Body>\r\n                </BS.Card>\r\n              </BS.Container>\r\n            </Popup>\r\n          </BS.Card.Header>\r\n        </BS.Card>\r\n        \r\n        <BS.Accordion className=\"mb-3 mt-3 w-100\" defaultActiveKey=\"0\">\r\n            {memberList}\r\n        </BS.Accordion>\r\n        </>\r\n        }\r\n        </>\r\n    )\r\n}","import React from 'react';\r\n\r\nimport System from './System.js'\r\nimport Memberlist from './Memberlist.js'\r\n\r\nexport default function Dash(props) {\r\n\r\n    return (<>\r\n            <System />\r\n            <Memberlist />\r\n            </>\r\n    );\r\n}","import * as BS from 'react-bootstrap'\r\nimport useDarkMode from 'use-dark-mode';\r\nimport Toggle from 'react-toggle'\r\nimport { FaSun, FaMoon } from \"react-icons/fa\";\r\n\r\nimport \"react-toggle/style.css\"\r\nimport history from \"../History.js\";\r\n\r\nexport default function Navigation() {\r\n        \r\n    const darkMode = useDarkMode(false);\r\n\r\n    function logOut() {\r\n        localStorage.removeItem(\"token\");\r\n        localStorage.removeItem(\"user\");\r\n        history.push('/pk-webs');\r\n    }\r\n\r\n    return (\r\n        <BS.Navbar className=\"mb-5 align-items-center justify-content-between\">\r\n            <BS.Navbar.Brand>\r\n                pk-web\r\n            </BS.Navbar.Brand>\r\n            <BS.Nav className=\"mr-lg-2 d-flex align-items-center row\">\r\n            <Toggle\r\n                defaultChecked={true}\r\n                icons={false}\r\n                onChange={darkMode.toggle} />\r\n                {darkMode.value ? <FaMoon className=\"m-1\"/> : <FaSun className=\"m-1\"/>}\r\n            </BS.Nav>\r\n            <BS.Form inline>\r\n            { localStorage.getItem('token') ? <BS.Button className=\" mr-lg-2\" variant=\"primary\" onClick={logOut}>Log Out</BS.Button> : \"\" }\r\n            </BS.Form>\r\n        </BS.Navbar>\r\n    )\r\n}","import * as BS from 'react-bootstrap'\r\n\r\nexport default function Navigation() {\r\n    return (\r\n        <BS.Navbar className=\"mt-4 align-items-center justify-content-between footer\">\r\n            <BS.Nav>\r\n                <BS.Nav.Item>\r\n                    <BS.Nav.Link rel=\"noreferrer\" target=\"_blank\" href=\"https://pluralkit.me/\">\r\n                        Pluralkit.me\r\n                    </BS.Nav.Link>\r\n                </BS.Nav.Item>\r\n                <BS.Nav.Item>\r\n                    <BS.Nav.Link rel=\"noreferrer\" target=\"_blank\" href=\"https://github.com/Spectralitree/pk-webs/\">\r\n                        github \r\n                    </BS.Nav.Link>\r\n                </BS.Nav.Item>\r\n            </BS.Nav>\r\n        </BS.Navbar>\r\n    )\r\n}","import React, {useEffect, useState} from 'react';\r\nimport { Router, Switch, Route, Redirect } from 'react-router-dom';\r\nimport  * as BS from 'react-bootstrap'\r\nimport { useForm } from \"react-hook-form\";\r\nimport * as fetch from 'node-fetch';\r\n\r\nimport './App.scss';\r\nimport 'bootstrap/dist/css/bootstrap.min.css';\r\nimport { FaLock } from \"react-icons/fa\";\r\n\r\nimport Dash from './Components/Dash.js'\r\nimport history from \"./History.js\";\r\nimport Loading from \"./Components/Loading.js\";\r\nimport Navigation from \"./Components/Navigation.js\";\r\nimport Footer from './Components/Footer.js'\r\n\r\nimport API_URL from \"./Constants/constants.js\";\r\n\r\nexport default function App() {\r\n\r\n  const [isLoading, setIsLoading ] = useState(false);\r\n  const [isSubmit, setIsSubmit ] = useState(false);\r\n  const [isInvalid, setIsInvalid] = useState(false);\r\n\r\n  const { register, handleSubmit } = useForm();\r\n\r\n  useEffect(() => {\r\n    if (localStorage.getItem('token')) {\r\n      logIn();\r\n    }\r\n  }, [])\r\n\r\n  const onSubmit = data => {\r\n    localStorage.setItem('token', data.pkToken);\r\n    logIn();\r\n  };\r\n\r\n function logIn() {\r\n     setIsInvalid(false);\r\n     setIsLoading(true);\r\n     \r\n      fetch(`${API_URL}s/`,{\r\n        method: 'GET',\r\n        headers: {\r\n          'Authorization': JSON.stringify(localStorage.getItem(\"token\")).slice(1, -1)\r\n        }}).then ( res => res.json()\r\n        ).then (data => { \r\n          localStorage.setItem('user', JSON.stringify(data));\r\n          setIsSubmit(true);\r\n          setIsLoading(false);\r\n          history.push(\"/pk-webs/dash\");\r\n      })\r\n        .catch (error => { \r\n          console.log(error);\r\n          setIsInvalid(true);\r\n          localStorage.removeItem('token');\r\n          localStorage.removeItem('user');\r\n          setIsLoading(false);\r\n        })\r\n      };\r\n\r\n\r\n  return (\r\n      <Router history={history} basename=\"/pk-webs\">\r\n        <Navigation/>\r\n          <BS.Container>\r\n            <Switch>\r\n            <Route path=\"/pk-webs/dash\" >\r\n              { !localStorage.getItem('token') || isInvalid ? <Redirect to=\"/pk-webs\"/> : <Dash />\r\n              }\r\n              </Route>\r\n              <Route exact path=\"/pk-webs\">\r\n                { isLoading ? <Loading /> :\r\n            <BS.Card className=\"mb-3 mt-3\">\r\n            <BS.Card.Header className=\"d-flex align-items-center justify-content-between\">\r\n              <BS.Card.Title><FaLock className=\"mr-3\" />Login</BS.Card.Title>\r\n            </BS.Card.Header>\r\n            <BS.Card.Body>\r\n            <BS.Form onSubmit={handleSubmit(onSubmit)}>\r\n              { isSubmit && !localStorage.getItem('user') ? <BS.Alert variant=\"danger\">Something went wrong, please try again.</BS.Alert> : \"\"}\r\n              { isInvalid ? <BS.Alert variant=\"danger\">Invalid token.</BS.Alert> : \"\" }\r\n            <BS.Form.Row>\r\n                <BS.Col xs={12} lg={10}>\r\n                    <BS.Form.Label>Enter your token here. You can get your token by using <b>\"pk;token\"</b>.</BS.Form.Label>\r\n                </BS.Col>\r\n            </BS.Form.Row>\r\n            <BS.Form.Row>\r\n              <BS.Col xs={12} lg={10}>\r\n                <BS.Form.Control required name=\"pkToken\" type=\"text\" ref={register} placeholder=\"token\" />\r\n              </BS.Col>\r\n              <BS.Col>\r\n                <BS.Button variant=\"primary\" type=\"submit\" block >Submit</BS.Button>\r\n              </BS.Col>\r\n            </BS.Form.Row>\r\n          </BS.Form>\r\n          </BS.Card.Body>\r\n          </BS.Card>\r\n          }\r\n              </Route>\r\n            </Switch>\r\n          </BS.Container>\r\n          <Footer />\r\n      </Router>\r\n  );\r\n}\r\n","import React from 'react';\r\nimport ReactDOM from 'react-dom';\r\nimport { Router } from \"react-router-dom\";\r\nimport history from \"./History.js\";\r\nimport './index.css';\r\nimport App from './App';\r\n\r\nReactDOM.render(\r\n  <Router history={history} basename=\"/pk-webs\">\r\n    <App />\r\n  </Router>,\r\n  document.getElementById('root')\r\n);\r\n","const markdown = require('simple-markdown');\r\nconst highlight = require('highlight.js');\r\n\r\nfunction htmlTag(tagName, content, attributes, isClosed = true, state = { }) {\r\n\tif (typeof isClosed === 'object') {\r\n\t\tstate = isClosed;\r\n\t\tisClosed = true;\r\n\t}\r\n\r\n\tif (!attributes)\r\n\t\tattributes = { };\r\n\r\n\tif (attributes.class && state.cssModuleNames)\r\n\t\tattributes.class = attributes.class.split(' ').map(cl => state.cssModuleNames[cl] || cl).join(' ');\r\n\r\n\tlet attributeString = '';\r\n\tfor (let attr in attributes) {\r\n\t\t// Removes falsy attributes\r\n\t\tif (Object.prototype.hasOwnProperty.call(attributes, attr) && attributes[attr])\r\n\t\t\tattributeString += ` ${markdown.sanitizeText(attr)}=\"${markdown.sanitizeText(attributes[attr])}\"`;\r\n\t}\r\n\r\n\tlet unclosedTag = `<${tagName}${attributeString}>`;\r\n\r\n\tif (isClosed)\r\n\t\treturn unclosedTag + content + `</${tagName}>`;\r\n\treturn unclosedTag;\r\n}\r\nmarkdown.htmlTag = htmlTag;\r\n\r\nconst rules = {\r\n\tblockQuote: Object.assign({ }, markdown.defaultRules.blockQuote, {\r\n\t\tmatch: function(source, state, prevSource) {\r\n\t\t\treturn !/^$|\\n *$/.test(prevSource) || state.inQuote ? null : /^( *>>> ([\\s\\S]*))|^( *> [^\\n]*(\\n *> [^\\n]*)*\\n?)/.exec(source);\r\n\t\t},\r\n\t\tparse: function(capture, parse, state) {\r\n\t\t\tconst all = capture[0];\r\n\t\t\tconst isBlock = Boolean(/^ *>>> ?/.exec(all));\r\n\t\t\tconst removeSyntaxRegex = isBlock ? /^ *>>> ?/ : /^ *> ?/gm;\r\n\t\t\tconst content = all.replace(removeSyntaxRegex, '');\r\n\r\n\t\t\treturn {\r\n\t\t\t\tcontent: parse(content, Object.assign({ }, state, { inQuote: true })),\r\n\t\t\t\ttype: 'blockQuote'\r\n\t\t\t}\r\n\t\t}\r\n\t}),\r\n\tcodeBlock: Object.assign({ }, markdown.defaultRules.codeBlock, {\r\n\t\tmatch: markdown.inlineRegex(/^```(([a-z0-9-]+?)\\n+)?\\n*([^]+?)\\n*```/i),\r\n\t\tparse: function(capture, parse, state) {\r\n\t\t\treturn {\r\n\t\t\t\tlang: (capture[2] || '').trim(),\r\n\t\t\t\tcontent: capture[3] || '',\r\n\t\t\t\tinQuote: state.inQuote || false\r\n\t\t\t};\r\n\t\t},\r\n\t\thtml: (node, output, state) => {\r\n\t\t\tlet code;\r\n\t\t\tif (node.lang && highlight.getLanguage(node.lang))\r\n\t\t\t\tcode = highlight.highlight(node.lang, node.content, true); // Discord seems to set ignoreIllegals: true\r\n\r\n\t\t\tif (code && state.cssModuleNames) // Replace classes in hljs output\r\n\t\t\t\tcode.value = code.value.replace(/<span class=\"([a-z0-9-_ ]+)\">/gi, (str, m) =>\r\n\t\t\t\t\tstr.replace(m, m.split(' ').map(cl => state.cssModuleNames[cl] || cl).join(' ')));\r\n\r\n\t\t\treturn htmlTag('pre', htmlTag(\r\n\t\t\t\t'code', code ? code.value : markdown.sanitizeText(node.content), { class: `hljs${code ? ' ' + code.language : ''}` }, state\r\n\t\t\t), null, state);\r\n\t\t}\r\n\t}),\r\n\tnewline: markdown.defaultRules.newline,\r\n\tescape: markdown.defaultRules.escape,\r\n\tautolink: Object.assign({ }, markdown.defaultRules.autolink, {\r\n\t\tparse: capture => {\r\n\t\t\treturn {\r\n\t\t\t\tcontent: [{\r\n\t\t\t\t\ttype: 'text',\r\n\t\t\t\t\tcontent: capture[1]\r\n\t\t\t\t}],\r\n\t\t\t\ttarget: capture[1]\r\n\t\t\t};\r\n\t\t},\r\n\t\thtml: (node, output, state) => {\r\n\t\t\treturn htmlTag('a', output(node.content, state), { href: markdown.sanitizeUrl(node.target) }, state);\r\n\t\t}\r\n\t}),\r\n\turl: Object.assign({ }, markdown.defaultRules.url, {\r\n\t\tparse: capture => {\r\n\t\t\treturn {\r\n\t\t\t\tcontent: [{\r\n\t\t\t\t\ttype: 'text',\r\n\t\t\t\t\tcontent: capture[1]\r\n\t\t\t\t}],\r\n\t\t\t\ttarget: capture[1]\r\n\t\t\t}\r\n\t\t},\r\n\t\thtml: (node, output, state) => {\r\n\t\t\treturn htmlTag('a', output(node.content, state), { href: markdown.sanitizeUrl(node.target) }, state);\r\n\t\t}\r\n\t}),\r\n\tem: Object.assign({ }, markdown.defaultRules.em, {\r\n\t\tparse: function(capture, parse, state) {\r\n\t\t\tconst parsed = markdown.defaultRules.em.parse(capture, parse, Object.assign({ }, state, { inEmphasis: true }));\r\n\t\t\treturn state.inEmphasis ? parsed.content : parsed;\r\n\t\t},\r\n\t}),\r\n\tstrong: markdown.defaultRules.strong,\r\n\tu: markdown.defaultRules.u,\r\n\tstrike: Object.assign({ }, markdown.defaultRules.del, {\r\n\t\tmatch: markdown.inlineRegex(/^~~([\\s\\S]+?)~~(?!_)/),\r\n\t}),\r\n\tinlineCode: Object.assign({ }, markdown.defaultRules.inlineCode, {\r\n\t\tmatch: source => markdown.defaultRules.inlineCode.match.regex.exec(source),\r\n\t\thtml: function(node, output, state) {\r\n\t\t\treturn htmlTag('code', markdown.sanitizeText(node.content.trim()), null, state);\r\n\t\t}\r\n\t}),\r\n\ttext: Object.assign({ }, markdown.defaultRules.text, {\r\n\t\tmatch: source => /^[\\s\\S]+?(?=[^0-9A-Za-z\\s\\u00c0-\\uffff-]|\\n\\n|\\n|\\w+:\\S|$)/.exec(source),\r\n\t\thtml: function(node, output, state) {\r\n\t\t\tif (state.escapeHTML)\r\n\t\t\t\treturn markdown.sanitizeText(node.content);\r\n\r\n\t\t\treturn node.content;\r\n\t\t}\r\n\t}),\r\n\temoticon: {\r\n\t\torder: markdown.defaultRules.text.order,\r\n\t\tmatch: source => /^(¯\\\\_\\(ツ\\)_\\/¯)/.exec(source),\r\n\t\tparse: function(capture) {\r\n\t\t\treturn {\r\n\t\t\t\ttype: 'text',\r\n\t\t\t\tcontent: capture[1]\r\n\t\t\t};\r\n\t\t},\r\n\t\thtml: function(node, output, state) {\r\n\t\t\treturn output(node.content, state);\r\n\t\t},\r\n\t},\r\n\tbr: Object.assign({ }, markdown.defaultRules.br, {\r\n\t\tmatch: markdown.anyScopeRegex(/^\\n/),\r\n\t}),\r\n\tspoiler: {\r\n\t\torder: 0,\r\n\t\tmatch: source => /^\\|\\|([\\s\\S]+?)\\|\\|/.exec(source),\r\n\t\tparse: function(capture, parse, state) {\r\n\t\t\treturn {\r\n\t\t\t\tcontent: parse(capture[1], state)\r\n\t\t\t};\r\n\t\t},\r\n\t\thtml: function(node, output, state) {\r\n\t\t\treturn htmlTag('a', output(node.content, state), { class: 'd-spoiler' }, state);\r\n\t\t}\r\n\t},\r\n\tlink: markdown.defaultRules.link\r\n};\r\n\r\nconst discordCallbackDefaults = {\r\n\tuser: node => '@' + markdown.sanitizeText(node.id),\r\n\tchannel: node => '#' + markdown.sanitizeText(node.id),\r\n\trole: node => '&' + markdown.sanitizeText(node.id),\r\n\teveryone: () => '@everyone',\r\n\there: () => '@here'\r\n};\r\n\r\nconst rulesDiscord = {\r\n\tdiscordUser: {\r\n\t\torder: markdown.defaultRules.strong.order,\r\n\t\tmatch: source => /^<@!?([0-9]*)>/.exec(source),\r\n\t\tparse: function(capture) {\r\n\t\t\treturn {\r\n\t\t\t\tid: capture[1]\r\n\t\t\t};\r\n\t\t},\r\n\t\thtml: function(node, output, state) {\r\n\t\t\treturn htmlTag('span', state.discordCallback.user(node), { class: 'd-mention d-user' }, state);\r\n\t\t}\r\n\t},\r\n\tdiscordChannel: {\r\n\t\torder: markdown.defaultRules.strong.order,\r\n\t\tmatch: source => /^<#?([0-9]*)>/.exec(source),\r\n\t\tparse: function(capture) {\r\n\t\t\treturn {\r\n\t\t\t\tid: capture[1]\r\n\t\t\t};\r\n\t\t},\r\n\t\thtml: function(node, output, state) {\r\n\t\t\treturn htmlTag('span', state.discordCallback.channel(node), { class: 'd-mention d-channel' }, state);\r\n\t\t}\r\n\t},\r\n\tdiscordRole: {\r\n\t\torder: markdown.defaultRules.strong.order,\r\n\t\tmatch: source => /^<@&([0-9]*)>/.exec(source),\r\n\t\tparse: function(capture) {\r\n\t\t\treturn {\r\n\t\t\t\tid: capture[1]\r\n\t\t\t};\r\n\t\t},\r\n\t\thtml: function(node, output, state) {\r\n\t\t\treturn htmlTag('span', state.discordCallback.role(node), { class: 'd-mention d-role' }, state);\r\n\t\t}\r\n\t},\r\n\tdiscordEmoji: {\r\n\t\torder: markdown.defaultRules.strong.order,\r\n\t\tmatch: source => /^<(a?):(\\w+):(\\d+)>/.exec(source),\r\n\t\tparse: function(capture) {\r\n\t\t\treturn {\r\n\t\t\t\tanimated: capture[1] === \"a\",\r\n\t\t\t\tname: capture[2],\r\n\t\t\t\tid: capture[3],\r\n\t\t\t};\r\n\t\t},\r\n\t\thtml: function(node, output, state) {\r\n\t\t\treturn htmlTag('img', '', {\r\n\t\t\t\tclass: `d-emoji${node.animated ? ' d-emoji-animated' : ''}`,\r\n\t\t\t\tsrc: `https://cdn.discordapp.com/emojis/${node.id}.${node.animated ? 'gif' : 'png'}`,\r\n\t\t\t\talt: `:${node.name}:`\r\n\t\t\t}, false, state);\r\n\t\t}\r\n\t},\r\n\tdiscordEveryone: {\r\n\t\torder: markdown.defaultRules.strong.order,\r\n\t\tmatch: source => /^@everyone/.exec(source),\r\n\t\tparse: function() {\r\n\t\t\treturn { };\r\n\t\t},\r\n\t\thtml: function(node, output, state) {\r\n\t\t\treturn htmlTag('span', state.discordCallback.everyone(node), { class: 'd-mention d-user' }, state);\r\n\t\t}\r\n\t},\r\n\tdiscordHere: {\r\n\t\torder: markdown.defaultRules.strong.order,\r\n\t\tmatch: source => /^@here/.exec(source),\r\n\t\tparse: function() {\r\n\t\t\treturn { };\r\n\t\t},\r\n\t\thtml: function(node, output, state) {\r\n\t\t\treturn htmlTag('span', state.discordCallback.here(node), { class: 'd-mention d-user' }, state);\r\n\t\t}\r\n\t}\r\n};\r\n\r\nObject.assign(rules, rulesDiscord);\r\n\r\nconst rulesDiscordOnly = Object.assign({ }, rulesDiscord, {\r\n\ttext: Object.assign({ }, markdown.defaultRules.text, {\r\n\t\tmatch: source => /^[\\s\\S]+?(?=[^0-9A-Za-z\\s\\u00c0-\\uffff-]|\\n\\n|\\n|\\w+:\\S|$)/.exec(source),\r\n\t\thtml: function(node, output, state) {\r\n\t\t\tif (state.escapeHTML)\r\n\t\t\t\treturn markdown.sanitizeText(node.content);\r\n\r\n\t\t\treturn node.content;\r\n\t\t}\r\n\t})\r\n});\r\n\r\nconst rulesEmbed = Object.assign({ }, rules, {\r\n\tlink: markdown.defaultRules.link\r\n});\r\n\r\nconst parser = markdown.parserFor(rules);\r\nconst htmlOutput = markdown.htmlFor(markdown.ruleOutput(rules, 'html'));\r\nconst parserDiscord = markdown.parserFor(rulesDiscordOnly);\r\nconst htmlOutputDiscord = markdown.htmlFor(markdown.ruleOutput(rulesDiscordOnly, 'html'));\r\nconst parserEmbed = markdown.parserFor(rulesEmbed);\r\nconst htmlOutputEmbed = markdown.htmlFor(markdown.ruleOutput(rulesEmbed, 'html'));\r\n\r\n/**\r\n * Parse markdown and return the HTML output\r\n * @param {String} source Source markdown content\r\n * @param {Object} [options] Options for the parser\r\n * @param {Boolean} [options.embed=false] Parse as embed content\r\n * @param {Boolean} [options.escapeHTML=true] Escape HTML in the output\r\n * @param {Boolean} [options.discordOnly=false] Only parse Discord-specific stuff (such as mentions)\r\n * @param {Object} [options.discordCallback] Provide custom handling for mentions and emojis\r\n * @param {Object} [options.cssModuleNames] An object mapping css classes to css module classes\r\n */\r\nfunction toHTML(source, options, customParser, customHtmlOutput) {\r\n\tif ((customParser || customHtmlOutput) && (!customParser || !customHtmlOutput))\r\n\t\tthrow new Error('You must pass both a custom parser and custom htmlOutput function, not just one');\r\n\r\n\toptions = Object.assign({\r\n\t\tembed: false,\r\n\t\tescapeHTML: true,\r\n\t\tdiscordOnly: false,\r\n\t\tdiscordCallback: { }\r\n\t}, options || { });\r\n\r\n\tlet _parser = parser;\r\n\tlet _htmlOutput = htmlOutput;\r\n\tif (customParser) {\r\n\t\t_parser = customParser;\r\n\t\t_htmlOutput = customHtmlOutput;\r\n\t} else if (options.discordOnly) {\r\n\t\t_parser = parserDiscord;\r\n\t\t_htmlOutput = htmlOutputDiscord;\r\n\t} else if (options.embed) {\r\n\t\t_parser = parserEmbed;\r\n\t\t_htmlOutput = htmlOutputEmbed;\r\n\t}\r\n\r\n\tconst state = {\r\n\t\tinline: true,\r\n\t\tinQuote: false,\r\n\t\tinEmphasis: false,\r\n\t\tescapeHTML: options.escapeHTML,\r\n\t\tcssModuleNames: options.cssModuleNames || null,\r\n\t\tdiscordCallback: Object.assign({ }, discordCallbackDefaults, options.discordCallback)\r\n\t};\r\n\r\n\treturn _htmlOutput(_parser(source, state), state);\r\n}\r\n\r\nmodule.exports = {\r\n\tparser: source => parser(source, { inline: true }),\r\n\thtmlOutput,\r\n\ttoHTML,\r\n\trules,\r\n\trulesDiscordOnly,\r\n\trulesEmbed,\r\n\tmarkdownEngine: markdown,\r\n\thtmlTag\r\n};"],"sourceRoot":""}